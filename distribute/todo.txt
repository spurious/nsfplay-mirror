TODO
- Review write order / masking / return value and try to prevent conflict with FDS-RAM $8000-FFFF.
- Frame sequencer and $4017 response, make MMC5 sequencer independent

TODO LATER
- Breakout window for info (nice for looking at NSFe text chunk).
- VRC6 square phase reset should not reset divide
- Replace all pcounter with clock based simulation (except for VRC7)
- N163 horrible sound accuracy
- N163 volume vs num channels
- Vertical stacking for multiple key dots on same pitch?
- Command line wav could use fade out (actually set config param, also channel mask option).
- Command line wave have an option that temporarily sets a config value and restores it later (can use for fades, channel mask)
- One click button for keyboard view?
- NSF2
- Foobar2000 plugin?
- VRC7 emulation accuracy
- FDS high frequency modulation behaviour, verify against hardware
- MMC5 squares, are they nonlinear, does PCM affect them?
- Improve loop detection
- Fix init time allowance to be an actual 1s.
- Battletoads track 10, noise sounds much duller on hardware.
- Doommaster has pitch problem, also seems to have weird buffer cutting stuff, only in NSFPlay?
- Channel mask caption is ????? in Japanese UI.
- Settings Apply/Cacel buttons are ????? in Japanese UI.
- Settings audio quality panel has ????? at bottom in Japanese UI.
- APU2 option panel says "Option" instead of "Options"? Make consistent.

NOTE:
Bus -> writes to all devices, reads |= all devices
Layer -> writes to devices until true is returned, reads from devices until tru is returned

There is only one Bus and one Layer in the program, probably I want to change the Bus into a Layer, and move the "layer" to the end of the "bus" instead of the beginning. Review all read/write devices on the bus before changing to layer.

I think the only place where the "bus" behaviour is used is between apu1 and apu2; consider merging them